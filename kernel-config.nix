pkgs: with pkgs.lib.kernel; {
    MODULES = yes;
  WIRELESS = yes;
  CFG80211 = yes;
  MAC80211 = yes;
  MT76_CORE = yes;
  MT7915E = yes;
  IPV6 = yes;
  WIREGUARD = module;
  WLAN_VENDOR_MEDIATEK = yes;
  NET_SCHED = yes;
  NET_SCH_FQ_CODEL = yes;
  NET_SCH_DEFAULT = yes;

  #MODULE_SIG = yes;
  #MODULE_SIG_FORMAT = yes;
  #SYSTEM_DATA_VERIFICATION = yes; # required for mac80211

  #CONFIG_GPIO_MT7621 = yes;
  #CONFIG_I2C_MT7621 = yes;
  #CONFIG_MT7621_WDT = yes;
  #CONFIG_MTD_NAND_MT7621 = yes;
  #CONFIG_PCI_MT7621 = yes;
  #CONFIG_PCI_MT7621_PHY = yes;
  #CONFIG_SOC_MT7621 = yes;
  #CONFIG_SPI_MT7621 = yes;
  BLK_DEV_INITRD = yes;
  RD_GZIP = yes;

  ARCH_KEEP_MEMBLOCK = yes;
  ARCH_32BIT_OFF_T = yes;
  #ARCH_HIBERNATION_POSSIBLE = yes;
  ARCH_MMAP_RND_BITS_MAX = freeform "15";
  ARCH_MMAP_RND_COMPAT_BITS_MAX = freeform "15";
  #ARCH_NEEDS_CPU_IDLE_COUPLED = yes;
  #ARCH_SUSPEND_POSSIBLE = yes;
  AT803X_PHY = yes;
  BLK_MQ_PCI = yes;
  #BOARD_SCACHE = yes;
  #BOUNCE = yes;
  CEVT_R4K = yes;
  HAVE_CLK = yes;
  #CLKSRC_MIPS_GIC = yes;
  #CLOCKSOURCE_WATCHDOG = yes;
  CLONE_BACKWARDS = yes;
  #CMDLINE="rootfstype=squashfs,jffs2";
  CMDLINE = freeform "earlycon=uart8250,mmio32,0x1e000c00 earlyprintk debug";
  CMDLINE_BOOL = yes;
  # CMDLINE_OVERRIDE is not set
  COMMON_CLK = yes;
  # COMMON_CLK_BOSTON is not set
  COMPAT_32BIT_TIME = yes;
  CPU_GENERIC_DUMP_TLB = yes;
  CPU_HAS_DIEI = yes;
  CPU_HAS_PREFETCH = yes;
  CPU_HAS_RIXI = yes;
  CPU_HAS_SYNC = yes;
  CPU_IDLE = yes;
  ## CPU_IDLE_GOV_LADDER is not set
  CPU_IDLE_GOV_TEO = yes;
  CPU_MIPS32 = yes;
  ## CPU_MIPS32_R1 is not set
  CPU_MIPS32_R2 = yes;
  CPU_MIPSR2 = yes;
  #CPU_MIPSR2_IRQ_EI = yes;
  #CPU_MIPSR2_IRQ_VI = yes;
  CPU_NEEDS_NO_SMARTMIPS_OR_MICROMIPS = yes;
  CPU_PM = yes;
  CPU_R4K_CACHE_TLB = yes;
  #CPU_RMAP = yes;
  CPU_SUPPORTS_32BIT_KERNEL = yes;
  CPU_SUPPORTS_HIGHMEM = yes;
  CPU_SUPPORTS_MSA = yes;
  CRC16 = yes;
  CRYPTO = yes;
  CRYPTO_ACOMP2 = yes;
  CRYPTO_DEFLATE = yes;
  ##CRYPTO_HASH_INFO = yes;
  CRYPTO_LIB_POLY1305_RSIZE = freeform "2";
  CRYPTO_LZO = yes;
  CRYPTO_RNG2 = yes;
  CSRC_R4K = yes;
  DEBUG_PINCTRL = yes;
  #DIMLIB = yes;
  DMA_NONCOHERENT = yes;
  # DTB_GNUBEE1 is not set
  # DTB_GNUBEE2 is not set
  #DTB_RT_NONE = yes;
  DTC = yes;
  EARLY_PRINTK = yes;
  FIXED_PHY = yes;
  FW_LOADER = yes;
  FW_LOADER_COMPRESS = yes;
  #FW_LOADER_PAGED_BUF = yes;
  GENERIC_ATOMIC64 = yes;
  GENERIC_CLOCKEVENTS = yes;
  #GENERIC_CLOCKEVENTS_BROADCAST = yes;
  GENERIC_CMOS_UPDATE = yes;
  GENERIC_CPU_AUTOPROBE = yes;
  GENERIC_GETTIMEOFDAY = yes;
  GENERIC_IOMAP = yes;
  GENERIC_IRQ_CHIP = yes;
  #GENERIC_IRQ_EFFECTIVE_AFF_MASK = yes;
  GENERIC_IRQ_SHOW = yes;
  GENERIC_LIB_ASHLDI3 = yes;
  GENERIC_LIB_ASHRDI3 = yes;
  GENERIC_LIB_CMPDI2 = yes;
  GENERIC_LIB_LSHRDI3 = yes;
  GENERIC_LIB_UCMPDI2 = yes;
  GENERIC_PCI_IOMAP = yes;
  GENERIC_PHY = yes;
  GENERIC_PINCONF = yes;
  GENERIC_SCHED_CLOCK = yes;
  GENERIC_SMP_IDLE_THREAD = yes;
  GENERIC_TIME_VSYSCALL = yes;
  GLOB = yes;
  GPIOLIB = yes;
  GPIOLIB_IRQCHIP = yes;
  GPIO_GENERIC = yes;
  GPIO_MT7621 = yes;
  GPIO_RALINK = yes;
  WATCHDOG = yes;
  GPIO_WATCHDOG = yes;
  # GPIO_WATCHDOG_ARCH_INITCALL is not set
  GRO_CELLS = yes;
  #HANDLE_DOMAIN_IRQ = yes;
  #HARDWARE_WATCHPOINTS = yes;
  HAS_DMA = yes;
  HAS_IOMEM = yes;
  HAS_IOPORT_MAP = yes;
  #HIGHMEM = yes;
  I2C = yes;
  I2C_BOARDINFO = yes;
  I2C_CHARDEV = yes;
  I2C_GPIO = yes;
  I2C_MT7621 = yes;
  #INITRAMFS_SOURCE="";
  IRQCHIP = yes;
  IRQ_DOMAIN = yes;
  IRQ_DOMAIN_HIERARCHY = yes;
  IRQ_FORCED_THREADING = yes;
  IRQ_MIPS_CPU = yes;
  IRQ_WORK = yes;
  # KERNEL_ZSTD is not set
  NETDEVICES = yes;
  LEDS_TRIGGERS = yes;
  LED_TRIGGER_PHY = yes;
  LIBFDT = yes;
  LOCK_DEBUGGING_SUPPORT = yes;
  LZO_COMPRESS = yes;
  LZO_DECOMPRESS = yes;
  MDIO_BUS = yes;
  MDIO_DEVICE = yes;
  MEDIATEK_GE_PHY = yes;
  MEMFD_CREATE = yes;
  MFD_SYSCON = yes;
  MIGRATION = yes;
  MIPS = yes;
  #MIPS_ASID_BITS=8;
  #MIPS_ASID_SHIFT=0;
  #MIPS_CBPF_JIT = yes;
  MIPS_CLOCK_VSYSCALL = yes;
  #MIPS_CM = yes;
  # MIPS_CMDLINE_BUILTIN_EXTEND is not set
  # MIPS_CMDLINE_DTB_EXTEND is not set
  # MIPS_CMDLINE_FROM_BOOTLOADER is not set
  MIPS_CMDLINE_FROM_DTB = yes;
  #MIPS_CPC = yes;
  #MIPS_CPS = yes;
  #MIPS_CPS_CPUIDLE = yes;
  # MIPS_CPS_NS16550_BOOL is not set
  #MIPS_CPS_PM = yes;
  MIPS_CPU_SCACHE = yes;
  # MIPS_ELF_APPENDED_DTB is not set
  #MIPS_GIC = yes;
  #MIPS_L1_CACHE_SHIFT = freeform "5";
  MIPS_LD_CAN_LINK_VDSO = yes;
  #MIPS_MT = yes;
  #MIPS_MT_FPAFF = yes;
  #MIPS_MT_SMP = yes;
  # MIPS_NO_APPENDED_DTB is not set
  #MIPS_NR_CPU_NR_MAP=4;
  #MIPS_PERF_SHARED_TC_COUNTERS = yes;
  MIPS_RAW_APPENDED_DTB = yes;
  MIPS_SPRAM = yes;
  #MODULES_USE_ELF_REL = yes;
  MT7621_WDT = yes;
  # MTD_CFI_INTELEXT is not set
  MTD_CMDLINE_PARTS = yes;
  MTD_NAND_CORE = yes;
  MTD_NAND_ECC = yes;
  MTD_NAND_ECC_SW_HAMMING = yes;
  MTD_NAND_MT7621 = yes;
  #MTD_NAND_MTK_BMT = yes;
  MTD_PHYSMAP = yes;
  MTD_RAW_NAND = yes;
  #MTD_ROUTERBOOT_PARTS = yes;
  MTD_SPI_NOR = yes;
  #MTD_SPI_NOR_USE_VARIABLE_ERASE = yes;
  # MTD_SPLIT_FIT_FW = yes;
  # MTD_SPLIT_MINOR_FW = yes;
  # MTD_SPLIT_SEAMA_FW = yes;
  # MTD_SPLIT_TPLINK_FW = yes;
  # MTD_SPLIT_TRX_FW = yes;
  # MTD_SPLIT_UIMAGE_FW = yes;
  MTD_UBI = yes;
  #MTD_UBI_BEB_LIMIT=20;
  MTD_UBI_BLOCK = yes;
  #MTD_UBI_WL_THRESHOLD=4096;
  #MTD_VIRT_CONCAT = yes;
  # MTK_HSDMA is not set
  NEED_DMA_MAP_STATE = yes;
  NET_DEVLINK = yes;
  NET_DSA = yes;
  NET_DSA_MT7530 = yes;
  NET_DSA_TAG_MTK = yes;
  NET_FLOW_LIMIT = yes;
  NET_MEDIATEK_SOC = yes;
  NET_SWITCHDEV = yes;
  NET_VENDOR_MEDIATEK = yes;
  # NET_VENDOR_RALINK is not set
  NO_HZ_COMMON = yes;
  NO_HZ_IDLE = yes;
  #NR_CPUS=4;
  NVMEM = yes;
  MEMTEST = no;
  OF = yes;
  OF_ADDRESS = yes;
  OF_EARLY_FLATTREE = yes;
  OF_FLATTREE = yes;
  OF_GPIO = yes;
  OF_IRQ = yes;
  OF_KOBJ = yes;
  OF_MDIO = yes;
  #OF_NET = yes; # included in OF
  #PADATA = yes;
  PCI = yes;
  #PCI_DISABLE_COMMON_QUIRKS = yes;
  PCI_DOMAINS = yes;
  PCI_DOMAINS_GENERIC = yes;
  PCI_DRIVERS_GENERIC = yes;
  PCIE_MT7621 = yes;
  PHY_MT7621_PCI = yes;
  PERF_USE_VMALLOC = yes;
  PGTABLE_LEVELS = freeform "2";
  PHYLIB = yes;
  PHYLINK = yes;
  # PHY_RALINK_USB is not set
  PINCTRL = yes;
  PINCTRL_RALINK = yes;
  PINCTRL_MT7621 = yes;
  #PINCTRL_AW9523 = yes;
  #SOC_RT288X = yes;
  #PINCTRL_RT2880 = yes;
  # PINCTRL_SINGLE is not set
  #PINCTRL_SX150X = yes;
  #POWER_RESET = yes;
  #POWER_RESET_GPIO = yes;
  #POWER_SUPPLY = yes;
  #QUEUED_RWLOCKS = yes;
  #QUEUED_SPINLOCKS = yes;
  RALINK = yes;
  RALINK_WDT = yes;
  RATIONAL = yes;
  #REGMAP = yes;
  #REGMAP_MMIO = yes;
  REGULATOR = yes;
  #REGULATOR_FIXED_VOLTAGE = yes;
  #RESET_CONTROLLER = yes;
  #RFS_ACCEL = yes;
  #RPS = yes;
  #RTC = yes;
  #RTC_CLASS = yes;
  #RTC_DRV_BQ32K = yes;
  #RTC_DRV_PCF8563 = yes;
  #RTC_I2C_AND_SPI = yes;
  #RTC_MC146818_LIB = yes;
  SCHED_SMT = yes;
  SERIAL_8250_NR_UARTS = freeform "3";
  SERIAL_8250_RUNTIME_UARTS = freeform "3";
  #SERIAL_8250_RT288X = yes;
  SERIAL_MCTRL_GPIO = yes;
  SERIAL_OF_PLATFORM = yes;
  SGL_ALLOC = yes;
  SMP = yes;
  SMP_UP = yes;
  SOC_BUS = yes;
  SOC_MT7621 = yes;
  SPI = yes;
  SPI_MASTER = yes;
  SPI_MEM = yes;
  SPI_MT7621 = yes;
  SRCU = yes;
  SWPHY = yes;
  SYNC_R4K = yes;
  #SYSCTL_EXCEPTION_TRACE = yes;
  SYS_HAS_CPU_MIPS32_R1 = yes;
  SYS_HAS_CPU_MIPS32_R2 = yes;
  SYS_HAS_EARLY_PRINTK = yes;
  SYS_SUPPORTS_32BIT_KERNEL = yes;
  SYS_SUPPORTS_ARBIT_HZ = yes;
  SYS_SUPPORTS_HIGHMEM = yes;
  SYS_SUPPORTS_HOTPLUG_CPU = yes;
  SYS_SUPPORTS_LITTLE_ENDIAN = yes;
  SYS_SUPPORTS_MIPS16 = yes;
  SYS_SUPPORTS_MIPS_CPS = yes;
  SYS_SUPPORTS_MULTITHREADING = yes;
  SYS_SUPPORTS_SCHED_SMT = yes;
  SYS_SUPPORTS_SMP = yes;
  SYS_SUPPORTS_ZBOOT = yes;
  TARGET_ISA_REV = freeform "2";
  TICK_CPU_ACCOUNTING = yes;
  TIMER_OF = yes;
  TIMER_PROBE = yes;
  TREE_RCU = yes;
  TREE_SRCU = yes;
  #UBIFS_FS = yes;
  USB_SUPPORT = yes;
  USE_OF = yes;
  WATCHDOG_CORE = yes;
  WEAK_ORDERING = yes;
  #WEAK_REORDERING_BEYOND_LLSC = yes;
  XPS = yes;
  ZLIB_DEFLATE = yes;
  ZLIB_INFLATE = yes;

  # FIXME: get rid of all the FS's I don't need
  # NFS_V4_1 = no;
  # NFS_V4_2 = no;
  # NFS_COMMON = no;
  # ROOT_NFS = no;
  # EXT4_FS = no;
  # JBD2 = no;
}
